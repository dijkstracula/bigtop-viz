[{"/Users/ntaylor/code/water/bigtop-viz/src/index.tsx":"1","/Users/ntaylor/code/water/bigtop-viz/src/reportWebVitals.ts":"2","/Users/ntaylor/code/water/bigtop-viz/src/App.tsx":"3","/Users/ntaylor/code/water/bigtop-viz/src/keyframe.ts":"4","/Users/ntaylor/code/water/bigtop-viz/src/components/KeyframeTable.tsx":"5","/Users/ntaylor/code/water/bigtop-viz/src/components/PlaybackControls.tsx":"6","/Users/ntaylor/code/water/bigtop-viz/src/components/CartpoleStage.tsx":"7","/Users/ntaylor/code/water/bigtop-viz/src/components/MessageBar.tsx":"8"},{"size":222,"mtime":1612035024487,"results":"9","hashOfConfig":"10"},{"size":425,"mtime":1611949820154,"results":"11","hashOfConfig":"10"},{"size":4881,"mtime":1614962074251,"results":"12","hashOfConfig":"10"},{"size":5357,"mtime":1614964088411,"results":"13","hashOfConfig":"10"},{"size":1542,"mtime":1612307028743,"results":"14","hashOfConfig":"10"},{"size":3479,"mtime":1612985812167,"results":"15","hashOfConfig":"10"},{"size":2060,"mtime":1612306819332,"results":"16","hashOfConfig":"10"},{"size":350,"mtime":1612717524049,"results":"17","hashOfConfig":"10"},{"filePath":"18","messages":"19","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"20"},"tgzmoa",{"filePath":"21","messages":"22","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"23"},{"filePath":"24","messages":"25","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":1,"source":"26","usedDeprecatedRules":"20"},{"filePath":"27","messages":"28","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"29","messages":"30","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"31","usedDeprecatedRules":"20"},{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"20"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"20"},{"filePath":"36","messages":"37","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"20"},"/Users/ntaylor/code/water/bigtop-viz/src/index.tsx",[],["38","39"],"/Users/ntaylor/code/water/bigtop-viz/src/reportWebVitals.ts",[],["40","41"],"/Users/ntaylor/code/water/bigtop-viz/src/App.tsx",["42","43","44"],"import React, { Component } from 'react';\nimport { le } from 'binary-search-bounds';\n\nimport { Result } from \"./interfaces\"\nimport { KeyframeTable } from './components/KeyframeTable'\nimport { ChaptersFromKeyframes, Keyframe, KeyframesFromLines } from './keyframe';\nimport { PlaybackControls } from './components/PlaybackControls';\nimport { CartpoleStage } from './components/CartpoleStage';\nimport { MessageBar } from './components/MessageBar';\nimport { fileURLToPath } from 'url';\n\nconst WELCOME_MSG = \"ðŸŽª Welcome to BigTop ðŸŽª\"\n\ntype AppState = {\n  // TODO: Pull this out into a separate Error and Keyframe[] field, I think.  Destructuring it\n  // everywhere is more of a pain than I thought it would be.\n  keyframes: Result<Keyframe[]>\n  chapters: number[]\n  currentFrame: number\n  isPlaying: boolean\n  fps: number\n  msg: string\n}\n\nexport default class App extends Component<{}, AppState> {\n  public state: AppState = {\n    keyframes: [],\n    chapters: [],\n    currentFrame: 0,\n    isPlaying: true,\n    fps: 25,\n    msg: \"Load a Cartpoles file to begin.\"\n  }\n\n  onTimeout() {\n    setTimeout(() => {\n      if (this.state.isPlaying && !(this.state.keyframes instanceof Error) && this.state.keyframes.length > 0) {\n        const nextFrameIdx = (this.state.currentFrame + 1) % (this.state.keyframes.length - 1)\n        const nextFrame = this.state.keyframes[nextFrameIdx]\n\n        if (nextFrame.reward !== undefined) {\n          const msg = `Reward of ${nextFrame.reward} on frame ${nextFrameIdx}`\n          this.setState({ msg: msg })\n        }\n\n        this.setState({ currentFrame: nextFrameIdx })\n        this.onTimeout()\n      }\n    }, 1000 / this.state.fps)\n  }\n\n  onFileLoad(e: React.ChangeEvent<HTMLInputElement>) {\n    if (e.currentTarget.files === null || e.currentTarget.files.length == 0) {\n      return\n    }\n    const text = e.currentTarget.files[0].text()\n    text.then((blob) => {\n      const lines = blob.split(\"\\n\")\n      const kfs = KeyframesFromLines(lines)\n      if (!(kfs instanceof Error)) {\n        const chps = ChaptersFromKeyframes(kfs)\n\n        this.setState({ keyframes: kfs, chapters: chps, currentFrame: 0 })\n        this.onTimeout()\n      } else {\n        this.setState({ keyframes: kfs })\n      }\n    })\n  }\n\n  render() {\n    let vizComponents;\n\n    if (this.state.keyframes instanceof Error) {\n      vizComponents = <div>Error: {this.state.keyframes.message} </div>\n    } else if (this.state.keyframes?.length === 0) {\n      vizComponents = <div>\n        <h1>{WELCOME_MSG}</h1>\n      </div>\n    } else {\n      vizComponents = <div className=\"container flex flex-direction=column\">\n        {/* left column: the viz stage */}\n        <div className=\"\">\n          <CartpoleStage kf={this.state.keyframes[this.state.currentFrame]} />\n        </div>\n        {/* right column: the keyframe table and controls */}\n        <div className=\"container flex-direction=row\">\n          <div className=\"container keyframe-table\">\n            <KeyframeTable currentFrame={this.state.currentFrame} keyframes={this.state.keyframes} />\n          </div>\n          <div className=\"container\">\n            <PlaybackControls\n              isPlaying={this.state.isPlaying}\n              fps={this.state.fps}\n              currentFrame={this.state.currentFrame}\n              totalFrames={this.state.keyframes.length}\n              onFPSChange={(fps: number) => this.setState({ fps: fps })}\n              onFrameChange={(frame: number) => {\n                this.setState({ currentFrame: frame, isPlaying: false, msg: \"\" })\n              }}\n              onPauseClick={() => {\n                this.setState({ isPlaying: !this.state.isPlaying })\n                this.onTimeout()\n              }}\n              onChapterChange={(offset: number) => {\n                let chIdx = le(this.state.chapters, this.state.currentFrame)\n                chIdx = (chIdx + this.state.chapters.length + offset) % (this.state.chapters.length)\n                this.setState({ currentFrame: this.state.chapters[chIdx], msg: `Skipping to chapter ${chIdx + 1} of ${this.state.chapters.length}` })\n              }}\n            />\n          </div>\n        </div>\n      </div>\n    }\n\n    return (\n      /* Menu */\n      <div className=\"container flex-direction=row\">\n        <div className=\"terminal-nav\">\n          <header className=\"terminal-logo\">Bigtop</header>\n          <nav className=\"terminal-menu\">\n            <ul vocab=\"https://schema.org\" typeof=\"BreadcrumbList\">\n              <li>\n                <label htmlFor=\"file-upload\" className=\"custom-file-upload\"> Load </label>\n                <input id=\"file-upload\" type=\"file\" accept=\"text/csv\" onChange={((e: any) => this.onFileLoad(e)).bind(this)} />\n              </li>\n            </ul>\n          </nav>\n        </div>\n        <hr />\n        {vizComponents}\n        < MessageBar msg={this.state.msg} />\n      </div >\n    );\n  }\n};\n","/Users/ntaylor/code/water/bigtop-viz/src/keyframe.ts",["45","46"],"/Users/ntaylor/code/water/bigtop-viz/src/components/KeyframeTable.tsx",["47"],"import * as React from 'react';\n\nimport { Keyframe } from '../keyframe';\n\ninterface Props {\n    keyframes: Keyframe[]\n    currentFrame: number\n}\n\nconst PRECISION = 3\nconst COLS = 10\n\nconst inputsFromProps = (props: Props) => {\n    const b = Math.min(props.keyframes.length - COLS, Math.max(0, props.currentFrame - COLS / 2))\n    const e = Math.min(props.keyframes.length, b + COLS)\n    const kfs = props.keyframes.slice(b, e)\n\n    const body = kfs.map((kf: Keyframe, i: number) => {\n        let classname = \"\"\n        if (i + b == props.currentFrame) {\n            classname += \" highlighted\"\n        }\n        return (\n            <tr className={classname} key={i + b}>\n                <td>{i + b}</td>\n                <td>{kf.cart_x.toFixed(PRECISION)}</td>\n                <td>{kf.cart_dx.toFixed(PRECISION)}</td>\n                <td>{kf.pole_omega.toFixed(PRECISION)}</td>\n                <td>{kf.pole_omega.toFixed(PRECISION)}</td>\n                <td>{kf.action}</td>\n            </tr>\n        )\n    })\n    return (<tbody>{body}</tbody>)\n}\n\nexport const KeyframeTable = (props: Props) => {\n    return (\n        <div>\n            <table>\n                <thead>\n                    <tr>\n                        <th>i</th>\n                        <th>x</th>\n                        <th>dx</th>\n                        <th>Î¸</th>\n                        <th>Ï‰</th>\n                        <th>â†”</th>\n                    </tr>\n                </thead>\n                {inputsFromProps(props)}\n            </table>\n        </div>\n    )\n}","/Users/ntaylor/code/water/bigtop-viz/src/components/PlaybackControls.tsx",[],"/Users/ntaylor/code/water/bigtop-viz/src/components/CartpoleStage.tsx",[],"/Users/ntaylor/code/water/bigtop-viz/src/components/MessageBar.tsx",[],{"ruleId":"48","replacedBy":"49"},{"ruleId":"50","replacedBy":"51"},{"ruleId":"48","replacedBy":"52"},{"ruleId":"50","replacedBy":"53"},{"ruleId":"54","severity":1,"message":"55","line":10,"column":10,"nodeType":"56","messageId":"57","endLine":10,"endColumn":23},{"ruleId":"58","severity":1,"message":"59","line":53,"column":72,"nodeType":"60","messageId":"61","endLine":53,"endColumn":74},{"ruleId":"62","severity":1,"message":"63","line":125,"column":114,"nodeType":"64","messageId":"61","endLine":125,"endColumn":118,"fix":"65"},{"ruleId":"58","severity":1,"message":"59","line":32,"column":20,"nodeType":"60","messageId":"61","endLine":32,"endColumn":22},{"ruleId":"58","severity":1,"message":"59","line":62,"column":25,"nodeType":"60","messageId":"61","endLine":62,"endColumn":27},{"ruleId":"58","severity":1,"message":"59","line":20,"column":19,"nodeType":"60","messageId":"61","endLine":20,"endColumn":21},"no-native-reassign",["66"],"no-negated-in-lhs",["67"],["66"],["67"],"@typescript-eslint/no-unused-vars","'fileURLToPath' is defined but never used.","Identifier","unusedVar","eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","no-extra-bind","The function binding is unnecessary.","CallExpression",{"range":"68","text":"69"},"no-global-assign","no-unsafe-negation",[4679,4690],""]